!function(){"use strict";var e={n:function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,{a:n}),n},d:function(t,n){for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t=window.wp.blocks,n=window.wp.element,o=window.wp.blockEditor,r=window.wp.apiFetch,c=e.n(r),a=window.wp.data;function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l.apply(this,arguments)}var s=(0,n.memo)((function(e){let{blocks:t,blockContextId:r,isHidden:c,setActiveBlockContextId:a}=e;const s=(0,o.__experimentalUseBlockPreview)({blocks:t,props:{className:"wp-block-cap-coauthor"}}),i=()=>{a(r)},u={display:c?"none":void 0};return(0,n.createElement)("div",l({},s,{tabIndex:0,role:"button",onClick:i,onKeyUp:i,style:u}))}));function i(){return(0,n.createElement)("div",(0,o.useInnerBlocksProps)({className:"wp-block-cap-coauthor"},{template:[["cap/coauthor-display-name"]]}))}var u=JSON.parse('{"u2":"cap/coauthors"}');(0,t.registerBlockType)(u.u2,{edit:function(e){let{clientId:t,context:r}=e;const{postId:l}=r,[u,d]=(0,n.useState)([]),[p,b]=(0,n.useState)(),m=(0,a.useDispatch)("core/notices");function v(e){"AbortError"!==e.name&&m.createErrorNotice(e.message,{isDismissible:!0})}(0,n.useEffect)((()=>{const e=new AbortController;return c()({path:`/coauthors/v1/authors/${l}`,signal:e.signal}).then(d).catch(v),()=>{e.abort()}}),[l]);const w=(0,a.useSelect)((e=>e(o.store).getBlocks(t)));return(0,n.createElement)("div",(0,o.useBlockProps)(),u&&u.map((e=>{var t;let{id:r,displayName:c}=e;const a=r===(p||(null===(t=u[0])||void 0===t?void 0:t.id));return(0,n.createElement)(o.BlockContextProvider,{key:r,value:{coAuthorId:r,displayName:c}},a?(0,n.createElement)(i,null):null,(0,n.createElement)(s,{blocks:w,blockContextId:r,setActiveBlockContextId:b,isHidden:a}))})))},save:function(){return(0,n.createElement)(o.InnerBlocks.Content,null)}})}();