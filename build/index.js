!function(){var e,t={849:function(e,t,n){"use strict";var r=window.wp.element,o=window.wp.plugins,a=window.wp.editPost,s=window.wp.i18n,u=window.wp.components,l=window.wp.data,c=window.wp.apiFetch,i=n.n(c),p=n(697),h=n.n(p),m=window.wp.primitives,v=(0,r.createElement)(m.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,r.createElement)(m.Path,{d:"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z"})),d=(0,r.createElement)(m.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,r.createElement)(m.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"})),f=(0,r.createElement)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,r.createElement)(m.Path,{d:"M13 11.8l6.1-6.3-1-1-6.1 6.2-6.1-6.2-1 1 6.1 6.3-6.5 6.7 1 1 6.5-6.6 6.5 6.6 1-1z"}));const g=(e,t,n)=>{const r=t.map((e=>e.value)).indexOf(e.value),o=r+("up"===n?-1:1),a=t.map((e=>Object.assign({},e))),s=a[r],u=[...a.filter((e=>e.value?e.value!==s.value:e!==s))];return u.splice(o,0,s),u},w=e=>{let{displayName:t,userNicename:n,email:r}=e;return{label:`${t} | ${r}`,display:t,value:n}},E=e=>{let{selectedAuthors:t,updateAuthors:n}=e;const o=(e,r)=>{let o;switch(r){case"moveDown":o=g(e,t,"down");break;case"moveUp":o=g(e,t,"up");break;case"remove":a=e,o=t.filter((e=>e.value!==a.value))}var a;n(o)};return t.map(((e,n)=>{const a=e.display,l=e.value;return(0,r.createElement)("div",{key:l,className:"cap-author"},(0,r.createElement)(u.Flex,{align:"center"},(0,r.createElement)(u.FlexItem,null,(0,r.createElement)("span",null,a)),(0,r.createElement)(u.FlexItem,{justify:"flex-end"},(0,r.createElement)(u.Flex,null,(0,r.createElement)("div",{className:"cap-icon-button-stack"},(0,r.createElement)(u.Button,{icon:v,className:"cap-icon-button",label:(0,s.__)("Move Up","co-authors-plus"),disabled:0===n||1===t.length,onClick:()=>o(e,"moveUp")}),(0,r.createElement)(u.Button,{icon:d,className:"cap-icon-button",label:(0,s.__)("Move down","co-authors-plus"),disabled:n===t.length-1||1===t.length,onClick:()=>o(e,"moveDown")})),(0,r.createElement)(u.Button,{icon:f,iconSize:20,className:"cap-icon-button",label:(0,s.__)("Remove Author","co-authors-plus"),disabled:1===t.length,onClick:()=>o(e,"remove")})))))}))};E.propTypes={selectedAuthors:h().arrayOf([h().shape({id:h().oneOfType([h().string,h().number]),userNiceName:h().string,login:h().string,email:h().string,displayName:h().string,avatar:h().string})]).isRequired,updateAuthors:h().func.isRequired};var _=E;const b={authors:[]},y={setAuthors:e=>({type:"SET_AUTHORS",authors:[...e]}),setAuthorsStore:e=>({type:"SET_AUTHORS_STORE",authors:[...e]}),apiRequest(e){return{type:"API_REQUEST",path:e,method:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET"}}};var S=(0,l.createReduxStore)("cap/authors",{reducer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_AUTHORS":return{...e,authors:[...e.authors,...t.authors]};case"SET_AUTHORS_STORE":return{...e,authors:[...t.authors]}}return e},actions:y,selectors:{getAuthors(e){const{authors:t}=e;return t},saveAuthors(e){const{authors:t}=e;return t}},controls:{API_REQUEST:e=>i()({path:e.path,method:e.method})},resolvers:{*getAuthors(e){const t=`/coauthors/v1/authors/${e}`,n=(yield y.apiRequest(t)).map((e=>w(e)));return y.setAuthors(n)},*saveAuthors(e,t){const n=`/coauthors/v1/authors/${e}?new_authors=${t.map((e=>e.value)).join(",")}`;yield y.apiRequest(n,"POST")}}});(0,l.register)(S);var O=()=>{const[e,t]=(0,r.useState)([]),[n,o]=(0,r.useState)([]),a=(0,l.useSelect)((e=>e("core/editor").getCurrentPostId())),[c,p]=(0,l.useSelect)((e=>{const{saveAuthors:t,getAuthors:n}=e("cap/authors");return{authors:n(a),saveAuthors:t}}),[a]),{setAuthorsStore:h}=((0,l.useSelect)((e=>e("core/editor").isSavingPost())),(0,l.useDispatch)("cap/authors")),m=e=>{h(e),t(e)};return(0,r.useEffect)((()=>{c.length&&(t(c),h(c),p(a,c))}),[c]),(0,r.createElement)(r.Fragment,null,Boolean(e.length)?(0,r.createElement)(r.Fragment,null,(0,r.createElement)(_,{selectedAuthors:e,updateAuthors:m})):(0,r.createElement)(u.Spinner,null),(0,r.createElement)(u.ComboboxControl,{className:"cap-combobox",label:(0,s.__)("Select An Author","co-authors-plus"),value:null,options:n,onChange:t=>{const r=((e,t,n)=>[...t,n.filter((t=>t.value===e))[0]])(t,e,n);m(r)},onFilterValueChange:async t=>{let n=0;const r=e.map((e=>e.value)).join(",");try{n=await i()({path:`/coauthors/v1/search/?q=${t}&existing_authors=${r}`,method:"GET"});const e=(a=n).length>0?a.map((e=>w(e))):[];o(e)}catch(e){n=0,console.log(e)}var a}}))};(0,o.registerPlugin)("plugin-coauthors-document-setting",{render:()=>(0,r.createElement)(a.PluginDocumentSettingPanel,{name:"coauthors-panel",title:"Authors",className:"coauthors"},(0,r.createElement)(O,null)),icon:"users"})},703:function(e,t,n){"use strict";var r=n(414);function o(){}function a(){}a.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,a,s){if(s!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:o};return n.PropTypes=n,n}},697:function(e,t,n){e.exports=n(703)()},414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,r),a.exports}r.m=t,e=[],r.O=function(t,n,o,a){if(!n){var s=1/0;for(i=0;i<e.length;i++){n=e[i][0],o=e[i][1],a=e[i][2];for(var u=!0,l=0;l<n.length;l++)(!1&a||s>=a)&&Object.keys(r.O).every((function(e){return r.O[e](n[l])}))?n.splice(l--,1):(u=!1,a<s&&(s=a));if(u){e.splice(i--,1);var c=o();void 0!==c&&(t=c)}}return t}a=a||0;for(var i=e.length;i>0&&e[i-1][2]>a;i--)e[i]=e[i-1];e[i]=[n,o,a]},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={826:0,431:0};r.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,a,s=n[0],u=n[1],l=n[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(o in u)r.o(u,o)&&(r.m[o]=u[o]);if(l)var i=l(r)}for(t&&t(n);c<s.length;c++)a=s[c],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(i)},n=self.webpackChunkco_authors_plus_3_5_2=self.webpackChunkco_authors_plus_3_5_2||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var o=r.O(void 0,[431],(function(){return r(849)}));o=r.O(o)}();